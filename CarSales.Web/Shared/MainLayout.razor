@inherits LayoutComponentBase
@using MudBlazor

<MudThemeProvider @bind-IsDarkMode="_isDarkMode" Theme="_theme" />
<MudDialogProvider />
<MudSnackbarProvider />
<MudPopoverProvider />

<MudLayout>
    <MudAppBar Elevation="1" Color="Color.Surface" Dense="true" Class="appbar-clean">
        <MudIcon Icon="@Icons.Material.Filled.DirectionsCar" Size="Size.Medium" Class="me-1" />
        <MudText Typo="Typo.h6" Class="me-4">CarSales</MudText>
        <MudText Typo="Typo.subtitle2" Class="d-none d-md-inline">Dashboard de ventas</MudText>
        <MudSpacer />
        <MudSwitch T="bool" @bind-Checked="_isDarkMode"
                   Color="Color.Default"
                   CheckedIcon="@Icons.Material.Filled.DarkMode"
                   UncheckedIcon="@Icons.Material.Filled.LightMode"
                   Class="me-2" />
        <MudButton Variant="Variant.Outlined"
                   Color="Color.Inherit"
                   Href="/swagger"
                   Target="_blank"
                   StartIcon="@Icons.Material.Filled.OpenInNew">
            API
        </MudButton>

        <MudSpacer />

        <MudTextField @bind-Value="_search"
                      Placeholder="Buscar..."
                      Adornment="Adornment.Start"
                      AdornmentIcon="@Icons.Material.Filled.Search"
                      Class="d-none d-md-flex me-2"
                      Margin="Margin.Dense"
                      Variant="Variant.Outlined"
                      Dense="true" />

        <MudIconButton Icon="@(_isDarkMode ? Icons.Material.Filled.DarkMode : Icons.Material.Outlined.LightMode)"
                       Color="Color.Inherit"
                       OnClick="@ToggleTheme"
                       Title="Tema oscuro" />

        <MudIconButton Icon="@Icons.Material.Filled.Refresh"
                       Color="Color.Inherit"
                       OnClick="@Refresh"
                       Title="Refrescar" />

        <MudMenu Icon="@Icons.Material.Filled.MoreVert" Color="Color.Inherit">
            <MudMenuItem Href="https://github.com/" Target="_blank">
                <MudIcon Icon="@Icons.Material.Filled.Code" Class="me-2" /> GitHub
            </MudMenuItem>
            <MudMenuItem Href="https://mudblazor.com/" Target="_blank">
                <MudIcon Icon="@Icons.Material.Filled.HelpOutline" Class="me-2" /> MudBlazor
            </MudMenuItem>
        </MudMenu>
    </MudAppBar>

    <MudDrawer Open="_drawerOpen"
               Variant="DrawerVariant.Responsive"
               Breakpoint="Breakpoint.Md"
               Elevation="1"
               Color="Color.Surface"
               ClipMode="DrawerClipMode.Always">
        <CarSalesNavMenu />
    </MudDrawer>

    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.False" Class="pa-4">
            @Body
        </MudContainer>
    </MudMainContent>
</MudLayout>
